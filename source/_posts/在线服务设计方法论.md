---
title: 在线服务设计方法论
date: 2020-05-12 21:09:36
tags:
---
可以说从大学毕业就阴差阳错地做了『在线服务』，中间转过几次大数据相关方向，也都还是免不了回到这个老本行。

幸运的是，期间既做过要求强一致的系统，也做过要求低延时、高吞吐的系统，还搞过微服务的拆分和管理等工作。

在这个领域里做了这么久，零零散散写过些东西，但是一直没有完整、系统地总结过这个领域里的方法论，现在是时候完成它了。

千言万语一张表：

<!-- more -->

|分层|细节|||
| ------ | -------------------------------------------------------- | ------------------------------- | -------------------- |
| **宏观** | [生态系统论](https://mp.weixin.qq.com/s/saFW6DfkSenR5rg9KlY5uA)：像构建一个生态系统一样构建一套系统 | [控制逻辑正交](https://coolshell.cn/articles/10652.html)：惊为天人的高层次抽象 |                      |
| **微观** | **收容数据**                                             | **处理数据**                    | **产出数据**         |
| 高性能 | 二进制描述<br />倒排结构                                 | 分治<br />优秀的算法喜欢有序的数据<br />无锁 | [牺牲精确性](https://mp.weixin.qq.com/s/TDJz9WLQercAvlMhHc1QDQ)<br />[缓存](https://coolshell.cn/articles/17416.html) |
| 高可靠 | 并发写：[乐观锁]([https://lihongyu.me/2019/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5%E8%A7%84%E8%8C%83%E5%8F%8A%E4%B9%90%E8%A7%82%E9%94%81%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF/](https://lihongyu.me/2019/04/18/数据库字段规范及乐观锁常见错误/))<br />分离：动静、读写、冷热、按业务<br /> | 尽量少依赖，一定要依赖尽量异步依赖，一定要同步依赖就打日志，加超时，加限流，加降级<br />fast fail原则<br />无状态设计<br /> | 幂等 |
